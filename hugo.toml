baseURL = 'http://laundromatzat.com/'
languageCode = 'en-us'
title = 'laundromatzat.com'

[params]
  description = "welcome to the laundromat"
  mainSections = ["videos"]  # Define main content section
  favicon = "/favicon.ico"

[menu]
  [[menu.main]]
    name = "home"
    pageRef = "/"
    weight = 0
  [[menu.main]]
    name = "videos"
    pageRef = "/videos"
    weight = 1
  [[menu.main]]
    name = "cinemagraphs"
    pageRef = "/cinemagraphs"
    weight = 2
  [[menu.main]]
    name = "images"
    pageRef = "/images"
    weight = 3
  [[menu.main]]
    name = "about"
    pageRef = "/about.md"
    weight = 4

[outputs]
  home = ["HTML", "RSS", "JSON"] # Added JSON
  section = ["HTML"]
  page = ["HTML"]

[mediaTypes]
  [mediaTypes."text/html"]
    suffixes = ["html"]
  [mediaTypes."application/json"] # Added JSON media type
    suffixes = ["json"]

[outputFormats]
  [outputFormats.JSON]
    mediaType = "application/json"
    baseName = "search-index"
    isPlainText = true
    notAlternative = true

[module]
  [[module.mounts]]
    source = "layouts"
    target = "layouts"

[server]
  [[server.headers]]
    for = "/**"
    [server.headers.values]
      Access-Control-Allow-Origin = "*"

  # Configure middleware for Hugo server
  [[server.middleware]]
    append = true  # Add this middleware after all others
    name = "htmx-detector"
    [server.middleware.handler]
      code = """
        function(req, res, next) {
          // Check if it's an HTMX request
          if (req.headers['hx-request'] === 'true') {
            // Set a custom parameter for HTMX requests
            req.params.request_type = 'htmx';
          }
          return next();
        }
      """


[markup]
  [markup.goldmark]
    [markup.goldmark.renderer]
      unsafe = true  # Allow HTML in markdown

[build]
  writeStats = true  # Enable build statistics

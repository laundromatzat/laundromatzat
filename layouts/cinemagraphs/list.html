{{/* layouts/cinemagraphs/list.html */}}
{{ define "main" }}
<div class="section-header">
  <h1>cinemagraphs</h1>
  <div class="accent-line"></div>
  <div class="section-introduction">{{ .Content }}</div>
</div>

<div class="cinemagraph-grid">
  {{ range $index, $item := $.Site.Data.cinemagraphs.cinemagraphs }}
    {{ $orientation := "landscape" }} {{/* Basic orientation default */}}
    {{/* Add logic here if you store dimensions */}}

    <div class="cinemagraph-item {{ $orientation }}">
      <video preload="metadata" poster="{{ .thumbnail | default "/images/placeholder.webp" }}" playsinline loop muted>
        {{ $videoType := "video/mp4" }}
        {{ if hasSuffix .token ".m4v" }}{{ $videoType = "video/x-m4v" }}{{ end }}
        {{ if hasSuffix .token ".webm" }}{{ $videoType = "video/webm" }}{{ end }}
        {{ if hasSuffix .token ".ogg" }}{{ $videoType = "video/ogg" }}{{ end }}
        <source src="{{ .token }}" type="{{ $videoType }}">
        Your browser does not support the video tag.
      </video>

      <div class="cinemagraph-overlay"> {{/* Metadata overlay remains */}}
         <h2>{{ .title | default "Cinemagraph" }}</h2>
         <div class="cinemagraph-metadata">
           {{ with .location }}<p class="location">{{ . }}</p>{{ end }}
           {{ with .date }}<p class="date">{{ . }}</p>{{ end }}
         </div>
      </div>
    </div>
  {{ end }}
</div>
{{ end }}
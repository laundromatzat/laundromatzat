{{/* layouts/videos/list.html */}}
{{ define "main" }}
<div class="section-header">
  <h1>videos</h1>
  <div class="accent-line"></div>
  <div class="section-introduction">{{ .Content }}</div>
</div>

{{/* Removed sorting logic - directly range over original data */}}
{{ $videos := $.Site.Data.videos.videos }}

{{/* Container for the grid */}}
<div id="video-grid-container">
  <div class="video-grid">
    {{ range $index, $item := $videos }} {{/* Iterate over original data order */}}
      <div class="video-grid__item">
        <div class="video-grid__thumbnail-wrapper">
          {{/* Controls are visible by default, overlay adjusted in CSS */}}
          <video controls playsinline poster="{{ .thumbnail }}">
            {{ $videoType := "video/mp4" }}
            {{ if hasSuffix .token ".mov" }}{{ $videoType = "video/quicktime" }}{{ end }}
            {{/* Add other types if needed */}}
            <source src="{{ .token }}" type="{{ $videoType }}">
            Your browser does not support the video tag.
          </video>
          <div class="video-grid__metadata-overlay">
            <h2>{{ .title }}</h2>
            <div class="video-grid__info-row">
              {{ with .location }}<p class="location">{{ . }}</p>{{ end }}
              {{ with .date }}<p class="date">{{ . }}</p>{{ end }}
            </div>
            <i class="fas fa-camera behind-the-lens__icon"></i>
          </div>
          {{ with .behind_the_lens }}
          <div class="behind-the-lens__content" style="display: none;">
            <h3>Behind the Lens</h3>
            <p>{{ . }}</p>
          </div>
          {{ end }}
        </div>
      </div>
    {{ end }}
    {{ if not $videos }}
      <p>No videos found.</p>
    {{ end }}
  </div>{{/* Close video-grid */}}
</div>{{/* Close video-grid-container */}}

{{ end }} {{/* Close define "main" */}}
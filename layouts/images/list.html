{{ define "main" }}
<div class="section-header">
  <h1>Images</h1>
  <div class="accent-line"></div>
</div>

<div class="image-grid">
  {{ range $index, $item := $.Site.Data.images }}
    <div class="image-item {{ if .portrait }}portrait{{ end }}">
      <div class="image-container">
        <img class="image-grid__image" src="{{ .url }}" alt="{{ .title }}">
        <div class="image-overlay">
          <h2>{{ .title }}</h2>
          <div class="image-metadata">
            <p class="location">{{ .location }}</p>
            <p class="date">{{ .date }}</p>
          </div>
        </div>
      </div>
    </div>
  {{ end }}
</div>
{{ end }}

<script>
document.addEventListener('DOMContentLoaded', function() {
  const images = document.querySelectorAll('.image-grid__image'); 

  images.forEach(img => {
    img.addEventListener('click', function(e) {
      e.preventDefault();
      e.stopPropagation();

      if (img.requestFullscreen) {
        img.requestFullscreen();
      } else if (img.webkitRequestFullscreen) { /* Safari */
        img.webkitRequestFullscreen();
      } else if (img.msRequestFullscreen) { /* IE11 */
        img.msRequestFullscreen();
      }
    });

    img.addEventListener('load', function() {
      const item = this.closest('.image-item'); 
      if (this.naturalHeight > this.naturalWidth) {
        item.classList.add('portrait');
      } else {
        item.classList.add('landscape');
      }
    });
  });
});
</script>